<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
	<head>  
	    <meta charset="UTF-8">  
	    <title>Login</title>  
	    <style type="text/css"> 
			html{   
			    width: 100%;   
			    height: 100%;   
			    overflow: hidden;   
			    font-style: sans-serif;   
			}   
			body{   
			    width: 100%;   
			    height: 100%;   
			    font-family: 'Open Sans',sans-serif;   
			    margin: 0;   
			    background-color: #4A374A;   
			}   
			#login{   
			    position: absolute;   
			    top: 50%;   
			    left:50%;   
			    margin: -150px 0 0 -150px;   
			    width: 300px;   
			    height: 300px;   
			}   
			#login h1{   
			    color: #fff;   
			    text-shadow:0 0 10px;   
			    letter-spacing: 1px;   
			    text-align: center;   
			}   
			h1{   
			    font-size: 2em;   
			    margin: 0.67em 0;   
			}   
			input{   
			    width: 278px;   
			    height: 18px;   
			    margin-bottom: 10px;   
			    outline: none;   
			    padding: 10px;   
			    font-size: 13px;   
			    color: #fff;   
			    text-shadow:1px 1px 1px;   
			    border-top: 1px solid #312E3D;   
			    border-left: 1px solid #312E3D;   
			    border-right: 1px solid #312E3D;   
			    border-bottom: 1px solid #56536A;   
			    border-radius: 4px;   
			    background-color: #2D2D3F;   
			}   
			.but{   
			    width: 300px;   
			    min-height: 20px;   
			    display: block;   
			    background-color: #4a77d4;   
			    border: 1px solid #3762bc;   
			    color: #fff;   
			    padding: 9px 14px;   
			    font-size: 15px;   
			    line-height: normal;   
			    border-radius: 5px;   
			    margin: 0;   
			}   
		</style>
	</head> 
	<body>  
	    <div id="login">  
	        <h1>Login</h1>  
	            <input type="text" required="required" placeholder="用户名" id="u"></input>  
	            <input type="password" required="required" placeholder="密码" id="p"></input>  
	            <button class="but" type="submit" onclick="onLogin()">登录</button>  
	    </div>  
	</body>  

	<script type="text/javascript">
	var userName;    
	var passWord;    
	var xmlHttpRequest;    
	    
		//XmlHttpRequest对象    
		function createXmlHttpRequest()
		{
			if (window.ActiveXObject) 
			{ //如果是IE浏览器    
				return new ActiveXObject("Microsoft.XMLHTTP");
			} 
			else if (window.XMLHttpRequest) 
			{ //非IE浏览器    
				return new XMLHttpRequest();
			}
		}

		function onLogin()
		{
			userName = document.getElementById("u").value;
			passWord = document.getElementById("p").value;
			var url = "manager/login?username="+userName+"&password="+passWord+"";
			
			//1.创建XMLHttpRequest组建    
			xmlHttpRequest = createXmlHttpRequest();

			//2.设置回调函数    
			xmlHttpRequest.onreadystatechange = call;

			//3.初始化XMLHttpRequest组建    
			xmlHttpRequest.open("GET", url, true);

			//4.发送请求    
			xmlHttpRequest.send(null);
		}
		
		function call()
		{
			if (xmlHttpRequest.readyState == 4) 
			{
		        if (xmlHttpRequest.status == 200) 
		        {
		        	var obj = JSON.parse(xmlHttpRequest.responseText);
		            if (obj.id != "" && obj.id != undefined && obj.id != null) 
		            {
		                location.href = "data.html";
		            } 
		            else 
		            {
						alert("账号或密码错误");
		            }
		        }
		    }
		}
	</script>
</html>
